(()=>{var J=Object.defineProperty,$=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(m,t,r)=>t in m?J(m,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[t]=r,G=(m,t)=>{for(var r in t||(t={}))Y.call(t,r)&&B(m,r,t[r]);if(R)for(var r of R(t))W.call(t,r)&&B(m,r,t[r]);return m},Q=(m,t)=>$(m,v(t));var A=(m,t)=>{var r={};for(var e in m)Y.call(m,e)&&t.indexOf(e)<0&&(r[e]=m[e]);if(m!=null&&R)for(var e of R(m))t.indexOf(e)<0&&W.call(m,e)&&(r[e]=m[e]);return r};var y=(m,t,r)=>(B(m,typeof t!="symbol"?t+"":t,r),r),tt=(m,t,r)=>{if(!t.has(m))throw TypeError("Cannot "+r)};var d=(m,t,r)=>(tt(m,t,"read from private field"),r?r.call(m):t.get(m)),j=(m,t,r)=>{if(t.has(m))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(m):t.set(m,r)};var P="151";var st=Math.PI/180,it=180/Math.PI;function C(m,t,r){return Math.max(t,Math.min(r,m))}var S=class{constructor(t=0,r=0){S.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let r=this.x,e=this.y,o=t.elements;return this.x=o[0]*r+o[3]*e+o[6],this.y=o[1]*r+o[4]*e+o[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){let e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;let e=this.dot(t)/r;return Math.acos(C(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,e=this.y-t.y;return r*r+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){let e=Math.cos(r),o=Math.sin(r),s=this.x-t.x,c=this.y-t.y;return this.x=s*e-c*o+t.x,this.y=s*o+c*e+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};var E=class{constructor(t=0,r=0,e=0,o=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=e,this._w=o}static slerpFlat(t,r,e,o,s,c,x){let p=e[o+0],i=e[o+1],a=e[o+2],h=e[o+3],l=s[c+0],n=s[c+1],u=s[c+2],b=s[c+3];if(x===0){t[r+0]=p,t[r+1]=i,t[r+2]=a,t[r+3]=h;return}if(x===1){t[r+0]=l,t[r+1]=n,t[r+2]=u,t[r+3]=b;return}if(h!==b||p!==l||i!==n||a!==u){let z=1-x,F=p*l+i*n+a*u+h*b,O=F>=0?1:-1,X=1-F*F;if(X>Number.EPSILON){let g=Math.sqrt(X),Z=Math.atan2(g,F*O);z=Math.sin(z*Z)/g,x=Math.sin(x*Z)/g}let L=x*O;if(p=p*z+l*L,i=i*z+n*L,a=a*z+u*L,h=h*z+b*L,z===1-x){let g=1/Math.sqrt(p*p+i*i+a*a+h*h);p*=g,i*=g,a*=g,h*=g}}t[r]=p,t[r+1]=i,t[r+2]=a,t[r+3]=h}static multiplyQuaternionsFlat(t,r,e,o,s,c){let x=e[o],p=e[o+1],i=e[o+2],a=e[o+3],h=s[c],l=s[c+1],n=s[c+2],u=s[c+3];return t[r]=x*u+a*h+p*n-i*l,t[r+1]=p*u+a*l+i*h-x*n,t[r+2]=i*u+a*n+x*l-p*h,t[r+3]=a*u-x*h-p*l-i*n,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,e,o){return this._x=t,this._y=r,this._z=e,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){let e=t._x,o=t._y,s=t._z,c=t._order,x=Math.cos,p=Math.sin,i=x(e/2),a=x(o/2),h=x(s/2),l=p(e/2),n=p(o/2),u=p(s/2);switch(c){case"XYZ":this._x=l*a*h+i*n*u,this._y=i*n*h-l*a*u,this._z=i*a*u+l*n*h,this._w=i*a*h-l*n*u;break;case"YXZ":this._x=l*a*h+i*n*u,this._y=i*n*h-l*a*u,this._z=i*a*u-l*n*h,this._w=i*a*h+l*n*u;break;case"ZXY":this._x=l*a*h-i*n*u,this._y=i*n*h+l*a*u,this._z=i*a*u+l*n*h,this._w=i*a*h-l*n*u;break;case"ZYX":this._x=l*a*h-i*n*u,this._y=i*n*h+l*a*u,this._z=i*a*u-l*n*h,this._w=i*a*h+l*n*u;break;case"YZX":this._x=l*a*h+i*n*u,this._y=i*n*h+l*a*u,this._z=i*a*u-l*n*h,this._w=i*a*h-l*n*u;break;case"XZY":this._x=l*a*h-i*n*u,this._y=i*n*h-l*a*u,this._z=i*a*u+l*n*h,this._w=i*a*h+l*n*u;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,r){let e=r/2,o=Math.sin(e);return this._x=t.x*o,this._y=t.y*o,this._z=t.z*o,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){let r=t.elements,e=r[0],o=r[4],s=r[8],c=r[1],x=r[5],p=r[9],i=r[2],a=r[6],h=r[10],l=e+x+h;if(l>0){let n=.5/Math.sqrt(l+1);this._w=.25/n,this._x=(a-p)*n,this._y=(s-i)*n,this._z=(c-o)*n}else if(e>x&&e>h){let n=2*Math.sqrt(1+e-x-h);this._w=(a-p)/n,this._x=.25*n,this._y=(o+c)/n,this._z=(s+i)/n}else if(x>h){let n=2*Math.sqrt(1+x-e-h);this._w=(s-i)/n,this._x=(o+c)/n,this._y=.25*n,this._z=(p+a)/n}else{let n=2*Math.sqrt(1+h-e-x);this._w=(c-o)/n,this._x=(s+i)/n,this._y=(p+a)/n,this._z=.25*n}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let e=t.dot(r)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=e),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(C(this.dot(t),-1,1)))}rotateTowards(t,r){let e=this.angleTo(t);if(e===0)return this;let o=Math.min(1,r/e);return this.slerp(t,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){let e=t._x,o=t._y,s=t._z,c=t._w,x=r._x,p=r._y,i=r._z,a=r._w;return this._x=e*a+c*x+o*i-s*p,this._y=o*a+c*p+s*x-e*i,this._z=s*a+c*i+e*p-o*x,this._w=c*a-e*x-o*p-s*i,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);let e=this._x,o=this._y,s=this._z,c=this._w,x=c*t._w+e*t._x+o*t._y+s*t._z;if(x<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,x=-x):this.copy(t),x>=1)return this._w=c,this._x=e,this._y=o,this._z=s,this;let p=1-x*x;if(p<=Number.EPSILON){let n=1-r;return this._w=n*c+r*this._w,this._x=n*e+r*this._x,this._y=n*o+r*this._y,this._z=n*s+r*this._z,this.normalize(),this._onChangeCallback(),this}let i=Math.sqrt(p),a=Math.atan2(i,x),h=Math.sin((1-r)*a)/i,l=Math.sin(r*a)/i;return this._w=c*h+this._w*l,this._x=e*h+this._x*l,this._y=o*h+this._y*l,this._z=s*h+this._z*l,this._onChangeCallback(),this}slerpQuaternions(t,r,e){return this.copy(t).slerp(r,e)}random(){let t=Math.random(),r=Math.sqrt(1-t),e=Math.sqrt(t),o=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(r*Math.cos(o),e*Math.sin(s),e*Math.cos(s),r*Math.sin(o))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};var f=class{constructor(t=0,r=0,e=0){f.prototype.isVector3=!0,this.x=t,this.y=r,this.z=e}set(t,r,e){return e===void 0&&(e=this.z),this.x=t,this.y=r,this.z=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(K.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(K.setFromAxisAngle(t,r))}applyMatrix3(t){let r=this.x,e=this.y,o=this.z,s=t.elements;return this.x=s[0]*r+s[3]*e+s[6]*o,this.y=s[1]*r+s[4]*e+s[7]*o,this.z=s[2]*r+s[5]*e+s[8]*o,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let r=this.x,e=this.y,o=this.z,s=t.elements,c=1/(s[3]*r+s[7]*e+s[11]*o+s[15]);return this.x=(s[0]*r+s[4]*e+s[8]*o+s[12])*c,this.y=(s[1]*r+s[5]*e+s[9]*o+s[13])*c,this.z=(s[2]*r+s[6]*e+s[10]*o+s[14])*c,this}applyQuaternion(t){let r=this.x,e=this.y,o=this.z,s=t.x,c=t.y,x=t.z,p=t.w,i=p*r+c*o-x*e,a=p*e+x*r-s*o,h=p*o+s*e-c*r,l=-s*r-c*e-x*o;return this.x=i*p+l*-s+a*-x-h*-c,this.y=a*p+l*-c+h*-s-i*-x,this.z=h*p+l*-x+i*-c-a*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let r=this.x,e=this.y,o=this.z,s=t.elements;return this.x=s[0]*r+s[4]*e+s[8]*o,this.y=s[1]*r+s[5]*e+s[9]*o,this.z=s[2]*r+s[6]*e+s[10]*o,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){let e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this.z=t.z+(r.z-t.z)*e,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){let e=t.x,o=t.y,s=t.z,c=r.x,x=r.y,p=r.z;return this.x=o*p-s*x,this.y=s*c-e*p,this.z=e*x-o*c,this}projectOnVector(t){let r=t.lengthSq();if(r===0)return this.set(0,0,0);let e=t.dot(this)/r;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return k.copy(this).projectOnVector(t),this.sub(k)}reflect(t){return this.sub(k.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;let e=this.dot(t)/r;return Math.acos(C(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,e=this.y-t.y,o=this.z-t.z;return r*r+e*e+o*o}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,e){let o=Math.sin(r)*t;return this.x=o*Math.sin(e),this.y=Math.cos(r)*t,this.z=o*Math.cos(e),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,e){return this.x=t*Math.sin(r),this.y=e,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){let r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){let r=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),o=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=e,this.z=o,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,e=Math.sqrt(1-t**2);return this.x=e*Math.cos(r),this.y=e*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},k=new f,K=new E;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:P}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=P);var D=class{},w=class extends D{constructor(r){super();y(this,"class","Box");y(this,"halfExtents");this.halfExtents=new f().copy(r)}clone(){return new w(this.halfExtents)}},T=class extends D{constructor(r,e){super();y(this,"class","Cylinder");y(this,"radius");y(this,"height");this.radius=r,this.height=e}clone(){return new T(this.radius,this.height)}};var M=class{constructor({id:t=null,position:r=new f,rotation:e=new f,mesh:o,tint:s,moveable:c=!0,name:x=null,colliderShapes:p=[]}){y(this,"class","Pawn");y(this,"id");y(this,"position");y(this,"rotation");y(this,"mesh");y(this,"tint");y(this,"moveable");y(this,"name");y(this,"colliderShapes");this.id=t==null?M.nextId():t,this.position=new f().copy(r),this.rotation=new f().copy(e),this.mesh=o,this.tint=s,this.moveable=c,this.name=x,this.colliderShapes=p.map(i=>i.clone())}static nextId(){let[t,r]=new Uint32Array(Float64Array.of(Math.random()).buffer);return t=t&1048575,t=t*Math.pow(2,32),t+r}clone(t){return new this.constructor(G(Q(G({},this),{id:null}),t))}},U=class extends M{constructor(x){var p=x,{radius:r,size:e,scale:o,snaps:s=[]}=p,c=A(p,["radius","size","scale","snaps"]);super(c);y(this,"class","SnapPoint");y(this,"radius");y(this,"size");y(this,"scale");y(this,"snaps");this.radius=r,this.size=e,this.scale=o,this.snaps=[...s]}},N=class extends M{constructor(a){var h=a,{contents:r,back:e,sideColor:o,border:s,cornerRadius:c,cardThickness:x,size:p}=h,i=A(h,["contents","back","sideColor","border","cornerRadius","cardThickness","size"]);super(i);y(this,"class","Deck");y(this,"contents");y(this,"back");y(this,"sideColor");y(this,"border");y(this,"cornerRadius");y(this,"cardThickness");y(this,"size");this.contents=[...r],this.back=e,this.sideColor=o,this.border=s,this.cornerRadius=c,this.cardThickness=x,this.size=p}shuffle(){for(let r=this.contents.length-1;r>0;r--){let e=Math.floor(Math.random()*(r+1));[this.contents[r],this.contents[e]]=[this.contents[e],this.contents[r]]}}},q=class extends M{constructor(s){var c=s,{holds:r,capacity:e}=c,o=A(c,["holds","capacity"]);super(o);y(this,"class","Container");y(this,"holds");y(this,"capacity");r&&(this.holds=r.clone()),this.capacity=e}},V=class extends M{constructor(o){var s=o,{rollRotations:r=[]}=s,e=A(s,["rollRotations"]);super(e);y(this,"class","Dice");y(this,"rollRotations");this.rollRotations=r.map(c=>c.clone())}};function rt(m){return new Promise(t=>setTimeout(t,m))}var _,H=class extends EventTarget{constructor(){super();j(this,_,new Map);self.onmessage=r=>{let e=r.data;if(e.name=="update")for(let o of e.pawns)d(this,_).set(o.id,o);else if(e.name=="remove")for(let o of e.pawns)d(this,_).delete(o);else e.name=="clear"&&d(this,_).clear();this.dispatchEvent(new CustomEvent(e.name))}}pawns(){return d(this,_)}add(r){r!=null&&r[Symbol.iterator]||(r=[r]);for(let e of r)d(this,_).set(e.id,e);this.commit(r.map(e=>e.id))}remove(r){r!=null&&r[Symbol.iterator]||(r=[r]);for(let e of r)d(this,_).delete(e);this.commit(r)}commit(r=null){postMessage(r?{name:"commit",data:[...d(this,_).values()].filter(e=>r.indexOf(e.id)!=-1)}:{name:"commit",data:[...d(this,_).values()]})}};_=new WeakMap;self.Vector2=S;self.Vector3=f;self.Box=w;self.Cylinder=T;self.Pawn=M;self.Deck=N;self.Container=q;self.Dice=V;self.SnapPoint=U;self.world=new H;self.timeout=rt;})();
